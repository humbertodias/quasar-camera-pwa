"use strict";(globalThis["webpackChunkquasar_pwa"]=globalThis["webpackChunkquasar_pwa"]||[]).push([[900],{2900:(e,a,t)=>{t.r(a),t.d(a,{default:()=>C});var i=t(9835);const o=(0,i._)("p",{class:"text-h6"},"Camera",-1),r={class:"row"},n={class:"col-12 text-center"},s={autoplay:"",width:"250",ref:"videoplay"},c={class:"col-12 text-center"},l={class:"col-12 text-center"},m={src:"",ref:"imgTakePhoto",width:"250"};function d(e,a,t,d,u,h){const g=(0,i.up)("q-btn"),p=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(p,{padding:""},{default:(0,i.w5)((()=>[o,(0,i._)("div",r,[(0,i._)("div",n,[(0,i._)("video",s,null,512)]),(0,i._)("div",c,[u.cameraStart?((0,i.wg)(),(0,i.j4)(g,{key:1,label:"Tirar Foto",color:"primary",icon:"camera",onClick:h.takePhoto},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(g,{key:0,label:"Acessar Camera",color:"primary",icon:"camera",disable:!u.enableCamera,onClick:h.useCamera},null,8,["disable","onClick"]))]),(0,i._)("div",l,[(0,i._)("img",m,null,512)])])])),_:1})}const u={name:"PageCamera",data(){return{enableCamera:!1,cameraStart:!1,imageCapture:null,track:null}},mounted(){navigator.mediaDevices.getUserMedia&&(this.enableCamera=!0),this.enumerateDevices(),this.checkPermission(),this.notifyMe()},methods:{enumerateDevices(){navigator.mediaDevices?.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((e=>{e.forEach((e=>{console.log(`${e.kind}: ${e.label} id = ${e.deviceId}`)}))})).catch((e=>{console.error(`${e.name}: ${e.message}`)})):console.log("enumerateDevices() not supported.")},async checkPermission(){const e=await navigator.mediaDevices.enumerateDevices(),a=e.filter((({kind:e})=>"videoinput"===e)).map((({deviceId:e})=>({name:"camera",deviceId:e}))),t=a.map((e=>navigator.permissions.query(e)));try{const e=await Promise.all(t);let a=e.filter((e=>"granted"!=e)).length;a<1&&alert("Camera com acesso bloqueado. Conceda o acesso"),console.log("countGrantedCamera",a),e.forEach((({state:e},a)=>console.log("Camera",a,e)))}catch(i){console.error(i)}},notifyMe(){if("Notification"in window)if("granted"===Notification.permission){new Notification("Hi there!")}else"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{if("granted"===e){new Notification("Hi there!")}}));else alert("This browser does not support desktop notification")},useCamera(){navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{this.cameraStart=!0,this.$refs.videoplay.srcObject=e,this.track=e.getVideoTracks()[0],this.imageCapture=new ImageCapture(this.track)})).catch((e=>console.error(e)))},takePhoto(){this.imageCapture.takePhoto().then((e=>{createImageBitmap(e);const a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{this.$refs.imgTakePhoto.src=a.result,console.log(a.result)}})).catch((e=>console.error(e)))}}};var h=t(1639),g=t(9885),p=t(7065),v=t(9984),k=t.n(v);const f=(0,h.Z)(u,[["render",d]]),C=f;k()(u,"components",{QPage:g.Z,QBtn:p.Z})}}]);